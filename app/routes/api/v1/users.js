// Generated by CoffeeScript 1.7.1
module.exports = function(app, Users, passport) {
  app.post('/api/v1/users/', function(request, response) {
    return Users.create({
      email: request.body.email,
      password: request.body.password,
      firstName: request.body.firstName,
      lastName: request.body.lastName,
      username: request.body.username
    }).then(function(user) {
      if (user) {
        response.json(user);
        return response.statusCode = 201;
      } else {
        response.send({
          error: "Could not create user"
        });
        return response.statusCode = 500;
      }
    })["catch"](function(error) {
      throw error;
      return response.statusCode = 500;
    });
  });
  return app.post('/api/v1/users/login', passport.authenticate('local'), function(req, res) {
    return res.json({
      id: req.user.id,
      username: req.user.username
    });
  });
};
